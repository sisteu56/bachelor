%************************************************
\chapter{Evaluation}\label{ch:evaluation}
%************************************************

This chapter evaluates the thesis core claims.
- for this, we investigate four projects

\section{Results}\label{sec:results}

\subsection*{\textbf{RQ1: Evaluation of Structural CFIs}}\label{sec:eval_struc_cfis}

Examining the structural CFIs of different projects can give us insights into the patterns of feature development and the usage of commits therin.
We first generally desribe our results with the help of figure \ref{fig:feature_sfbr_plot} and figure \ref{fig:commit_sfbr_plot} as well as the tables \ref{tab:feature_sfbr_table} and \ref{tab:commit_sfbr_table}.
We also explain particularly interesting results of individual commits and features by investigating their specific purpose and properties.

\subsubsection*{Patterns of Feature Development}\label{sec:eval_feature_development}

In the first part of RQ1, we examine the number of commits involved in the development of a feature and relate it to its size.
Figure \ref{fig:feature_sfbr_plot} illustrates our results in three different plots for each project.
Each row displays the results for one project with the name of the respective project being shown on the far left. 
In the first column, we show the number of structurally interacting commits for each feature in a bar-plot.
For all projects, we notice a wide distribution of structurally interacting commits between features.
Numerous features, across all projects, interact with less than 5 commits suggesting that they need very little work to be implemented in comparison to other features.
Both \textsc{xz} and \textsc{lrzip} have features structurally interacting with more than 20 commits, while \textsc{gzip} even has four features that interact with more than 60 commits.
With a mean of 29, the features of \textsc{gzip} have by far the highest number of interacting commits on average.
\textsc{xz}, \textsc{lrzip} and \textsc{bzip2} have much lower averages at 9, 16 and 4 respectively.
As all projects are of a compression domain, we can find several features with the same general functionality across the examined projects.
The \textsf{verbosity}-feature structurally interacts with the most commits in \textsc{xz} and \textsc{bzip2}, while the same is not the case for the \textsf{verbose}-feature of \textsc{gzip}.
Although \textsc{gzip} encompasses the highest average number of interacting commits, its \textsf{recursive}-feature only interacts with 2 commits, while the \textsf{recursive}-feature of \textsc{lrzip} interacts with 24 commits. \\
In the second column of figure \ref{fig:feature_sfbr_plot}, we display the calculated feature-sizes for each project.
Again, we see a wide range of different feature-sizes within all projects.
Most notabely, there are large jumps between adjacent features, for example from \textsf{to\_stdout} with a size of 450 to \textsf{no\_name} with a size of 7300 in \textsc{gzip}.
Similarly to the number of interacting commits, \textsc{gzip} has by far the highest average feature size at 2500.
The average feature sizes for the other projects range from 190 for \testc{xz} to 390 for \textsc{bzip2}. 
In table \ref{tab:feature_sfbr_table}, we display the average nesting degree of features for all projects.
Feature-nesting is the least common for \textsc{xz} and \textsc{lrzip} and most common for \textsc{gzip} with an average of 0.93 indicating that the majority of features are nested to large extents.
This is also the case for the four, by far largest, features of \textsc{gzip}, namely \textsf{no\_name, method, force} and \textsf{decompress}.
Specifically, 90 to 100\% of the instructions constituting their size are identical among the mentioned features.
It is therefore not surprising that most, particularly 66, of the commits interacting with each feature are identical for all four features.
For them, it is highly doubtful whether the size of a feature and the number of interacting commits reflect the actual number of \texttt{implementing} commits and instructions of a specific feature. \\
Finally, the metrics used in the two previously dicussed plots are compared to each other using the regression plot of figure \ref{fig:feature_sfbr_plot}.
That is, we compare the size of a feature with the number of commits that structurally interact with it.
The values of the blue dots each represent a feature and are therefore identical to the values of the bars in the two previous columns.
For both \textsc{xz} and \textsc{gzip}, we determine a strong positive correlation between the size of a feature and its number of structurally interacting commits.
Their linear correlation coeffecients are close to 1 at 0.91 and 0.978 respectively with p-values smaller than $10^{-4}$.
% This data provides strong evidence that our initial notion, that larger features generally need more commits to be implemented, is correct.
This data provides strong evidence that the observed correlation is statistically significant.
While \textsc{bzip2} and \textsc{lrzip} have positive correlation coefficients of 0.585 and 0.968 respectively, their p-vlaues are relatively high at over 0.1.
The high p-values can be explained by a lack of datapoints for \textsc{lrzip} and conflicting datapoints for \textsc{bzip2}.
For example, do both the \textsf{opMode}- and \textsf{srcMode}-feature of \textsc{bzip2} structurally interact with 6 commits, but encompass vastly different feature sizes.
Overall, the two projects do not produce conclusive statistical evidence that the size of a feature and the number of interacting commits is positively correlated.

\begin{table}[t]
\caption{Additional Information for Structural Analysis of Features}
\label{tab:feature_sfbr_table}
\centering
\begin{tabular}{l r}
\toprule
\textbf{Projects} & \textbf{Average Feature Nesting Degree} \\ 
\midrule
  xz    & 0.34 \\
  gzip  & 0.93 \\
  bzip2 & 0.64 \\
  lrzip & 0.37 \\
\bottomrule
\end{tabular}
\end{table}

\clearpage

\begin{figure}[htbp]
  \centering
  \includesvg[height=19cm]{gfx/results/RQ1/feature-sfbr-plot.svg}
  \caption{Feature Structural CFIs Plot}
  \label{fig:feature_sfbr_plot}
\end{figure}

\clearpage

\begin{figure}[htbp]
  \centering
  \includesvg[height=14cm]{gfx/results/RQ1/commit-sfbr-plot.svg}
  \caption{Commit Structural CFIs Plot}
  \label{fig:commit_sfbr_plot}
\end{figure}

\subsubsection*{Usage of Commits in Feature Development}\label{sec:eval_commit_usage}

As discussed in chapter \ref{sec:research_questions}, a best practice for commits in feature development is that one commit should generally change only one feature.
We investigate to what extent this holds in our investigated software projects by examining the number of feature-related concerns of a commit.
% since we determined this to be a fitting estimator for the number of features a commit changes or implements.
The distribution of how many commits have a certain number of concerns is displayed in figure \ref{fig:commit_sfbr_plot}.
\textsc{xz}, \textsc{gzip} and \textsc{lrzip} show similar distributions, which is why we discuss them now and \textsc{bzip2} later.
For \textsc{xz}, \textsc{gzip} and \textsc{lrzip}, we note that the majority of commits only have single feature-related concern.
The according percentages for commits with a single concern among all considered commits are 72\%, 69\% and 81\%.
The commit count gradually drops with an increasing number of concerns until it subsides to 0 at an x-value of 7, 6 and 4 respectively.
Interestingly, three commits of \textsc{gzip} have more than 10 concerns with the commit \textsf{33ae4134cc} even encompassing 47 concerns.
Said commit originally introduced the \textsf{gzip.c}-file containing the \textsl{main}-function among other things.
The exceptionally high number of \textsf{33ae4134cc}'s concerns can be explained by the fact that many of \textsc{gzip}'s 14 features are partially implemented within \textsf{gzip.c}.
Additionally, the code of features is heavily nested inside each other, which means that the instructions stemming from said code encompass many different combinations of feature regions.
For \textsc{bzip2}, there are much less commits used in feature-development compared to the other projects with only 9 commits part of structural CFIs.
The distribution consists of two clusters, the first being at a single concern and the second cluster being located between 7 and 10 concerns.
The second cluster encompassing 5 commits is slightly bigger than the first cluster with a commit count of 4.
Since we are only dealing with a few commits here, that still produce quite interesting and unique data, we have a closer look at the purpose of these commits and relate it to the number of their concerns.
We find that all commits part of the second cluster were used to publish new versions of \textsc{bzip2}, always encompassing over 1000 additions.
Three out of the four commits part of the first cluster introduced minor changes and bug fixes, never changing more than 30 source-code lines.
The remaining commit updated \textsc{bzip2} to version 1.0.4 fixing minor bugs from the previous version with many of the added source-code lines being used for comments. 

\begin{table}[t]
\caption{Additional Information for Structural Analysis of Commits}
\label{tab:commit_sfbr_table}
\centering
\begin{tabular}{l r r}
\toprule
\textbf{Projects} & \textbf{Average Number of Concerns} & \textbf{After Filtering Large Commits} \\ 
\midrule
  xz    & 1.48 & 1.29 \\
  gzip  & 2.40 & 1.55 \\
  bzip2 & 5.11 & 4.62 \\
  lrzip & 1.30 & 1.30 \\
\bottomrule
\end{tabular}
\end{table}

In table~\ref{tab:commit_sfbr_table}, we display the average number of feature-related concerns within a project both before and after filtering exceptionally large commits.
The first column contains the project to which the averages ​​in their respective row belong.
In the following column, we show the initial averages before applying the mentioned restriction.
\textsc{xz} and \textsc{lrzip} encompass the lowest average number of concerns at 1.48 and 1.3 respectively.
Although the distribution of \textsc{gzip} shown in figure \ref{fig:commit_sfbr_plot} is similar to those of the formerly mentioned projects, its initial average is comparatively high at 2.4.
The main cause for this are the discussed three commits of \textsc{gzip} with exceptionally many concerns.
After filtering large commits within a project, we note that the averages of \textsc{xz}, \textsc{lrzip} and \textsc{gzip} become more similar.
While the average slightly decreased for \textsc{xz} to 1.29, it stayed the same for \textsc{lrzip}.
The three dicussed commits of \textsc{gzip} were part of the filtered commits, which explains the large drop of its average to 1.55.
Unsurprisingly, the initial average of \textsc{bzip2} is by far the highest among all projects.
Since most of \textsc{bzip2}'s commits are relatively large, this is also the reason why they are not excluded from our analysis. 
Here, only one commit with 9 concerns is removed, which lowers the average to 4.58.
We also performed a qualitative analysis of the filtered commits to check whether our suspicion, that they were mostly used to refactor code, is true.
We find that many of them were used to import the project or newer versions to git.
The fact that such commits exist is unsurprising, considering that the investigated tools have been published before the release of git or before git was widespread.
While their purpose might not be refactoring code, it does make sense to filter these commits, as they are not accurately depicting the development process of the project itself or of its features.
Only two out of the eighteen commits we filtered in all projects, were actually used to refactor code, specifically moving contents between files or adapting the code to a newer version of C.
For half of all exceptionally large commits we found no reason, neither refactoring code or importing the project to git, to be left out of our analysis.

\subsection*{\textbf{RQ2: Evaluation of Dataflow-based CFIs}}\label{sec:eval_df_cfis}

Although dataflow-based CFIs only include dataflow in one direction, namely from commits to features, we examine properties, that can be extracted from this type of CFIs, for both commits and features.
Our results regarding the commits affecting features through dataflow are shown in figure \ref{fig:proportional_commit_dfbr_plot} and in the tables \ref{tab:x} and \ref{tab:y}.
Figure \ref{fig:feature_dfbr_plot} displays our results for the features of a project and the commits that affect them through dataflow.

\subsubsection*{Proportion and Dependencies of Commits Affecting Features through Dataflow}\label{sec:eval_commit_dfbr}

At first, we examine the fraction of commits affecting features through dataflow among the \texttt{active} commits of a project.
There, we also evaluate the effects and dependencies of commits part of structural CFIs on said fraction.
Following this, we intend to determine the proportion of outside dataflow origins within the commits with dataflow interactions.
The respective number of active commits are shown in the first column of table \ref{tab:commit_dfbr_table} for each project.
We determined \textsc{xz} to have the highest number of active commits at 1039, while \textsc{bzip2} only has a tiny fraction of that at 37.
In the first plot of figure \ref{fig:commit_dfbr_plot}, the bars colored in red show what percentage of commits interact with features through dataflow.
We notice that the respective percentages are vastly different from project to project.
The majority of \textsc{gzip}'s active commits are part of dataflow-based CFIs at 62.9\%.
This percentage drops to about 27\% for \textsc{bzip2}, with another large reduction to 11.3\% for \textsc{xz}.
This means that more than every second commit in \textsc{gzip}, roughly every fourth commit in \textsc{bzip2} and every ninth commit in \textsc{xz} affects features through dataflow.
The bars colored in grey display the fraction of active commits structurally interacting with features.
In addition to the obvious fact of how often commits are used to implement features, this also bears important consequences for the fraction of commits with dataflow interactions.
\iffalse
The more commits are part of structural CFIs, the more of the code contributed by them and therefore the overall code of a project will be part of feature regions.
Logically, the accuracy of this estimation depends on many factors, such as the extend to which commits contributing code to features, also contribute code to other parts of a program.
Still, given the large disparity in the percentage of commits with structural interactions, we can be relatively certain that \textsc{xz} has the lowest proportion and \textsc{gzip} the largest proportion of feature-code with \textsc{bzip2} somewhere inbetween.
\fi
Comparing the two bar-types, we notice that the percentage of commits with structural interactions is lower than the percentage of commits with dataflow interactions for each project. \\
\begin{table}[t]
\caption{Additional Information for Dataflow Analysis of Commits}
\label{tab:commit_dfbr_table}
\centering
\begin{tabular}{l r r}
\toprule
\textbf{Projects} & \textbf{Number of Active Commits} & \textbf{Probability for Commit to be part of dataflow CFI} \\ 
 		  & 			     	      & \textbf{given that it is part of structural CFI} \\
\midrule
  xz    & 1039 & 0.883 \\
  gzip  & 194 & 1.000 \\
  bzip2 & 37 & 0.889 \\
\bottomrule
\end{tabular}
\end{table}
This phenomenon can be explained considering the values presented in the second column of table \ref{tab:commit_dfbr_table}.
There, we show the probablity for a commit to be part on any dataflow-based CFI, given that said commit is part of any structural CFI.
We see that the probabilities are slightly below 90\% for \textsc{xz} as well as \textsc{bzip2} and even at 100\% for \textsc{gzip}.
This means that by only taking into account commits part of structural CFIs, we already encounter a lot of commits that affect features through dataflow.
If we then consider the entire set of active commits, the number of commits with dataflow interactions will likely exceed the number of commits with structural interactions.
This also implies that most, if not all, commits constituting the grey bar of a project will in turn constitute parts of the red bar as well. \\
\iffalse
Across all projects, the probability for a commit to interact with features through dataflow, given that it is part of structural CFIs, is much higher than the same probability for any active commit.
We consider this as a clear indication that our assumptions in section \ref{sec:combination_cfis}, that structural CFIs heavily coincide with dataflow-based CFIs, are correct.
Since our intent is to especially focus on commits whose interactions with features can only be discovered by employing our dataflow analysis, we quantified the respective commits in the investigated projects.
For this, we examine the relative difference between the percentages of commits with structural and commits with dataflow interactions.
This difference roughly determines what share of commits are part of the discussed more interesting dataflow interactions.
The difference is the smallest for \textsc{bzip2} at 10\% and slightly higher than that for \textsc{gzip} at 15\%.
\textsc{xz} has by far the biggest relative difference at almost 49\%, which means that our dataflow analysis reveals many additional interactions here. 
\fi
We explore the topic of different dataflow interaction types more thoroughly in our second plot, which focuses on the \textsf{origin} of dataflow.
There, we have a closer look at the commits affecting features through dataflow and where their dataflow stems from.
Naturally, dataflow occuring inside the regions of a feature is more intentional and therefore less interesting, than dataflow originating outside its regions.
In section \ref{sec:combination_cfis}, we explain, that the dataflow of commits and features not structurally interacting with each other, must be outside dataflow.
Even though the regions of a commit and regions of a feature must partially overlap in order for them to structurally interact, such a commit can still have regions not part of any feature regions.
Therefore, we cannot be sure whether the dataflow of these interactions originates from outside or inside the regions of a feature.
Due to the inherent properties of structural interactions, i.e. heavily coinciding with dataflow interactions, we assume their dataflow to originate inside the regions of a feature.
In the second plot of figure \ref{fig:commit_dfbr_plot}, we separate the commits with dataflow interactions into three categories based on dataflow origin.
The first category, shown as the bar colored in blue, represents commits that only interact with features through outside dataflow.
They make up the majority of commits for \textsc{xz} at 56.4\% and 20\% as well as 25.4\% of commits for \textsc{bzip2} and \textsc{gzip} respectively.
The second category represents commits that interact with features through outside and inside dataflow.
Logically, these commits affect at least two features through dataflow and only structurally interact with a subset of them.
Surprsingly, they form the majority of commits for \textsc{bzip2} and \textsc{gzip} at 60 and 44.3\% respectively and around 20\% of commits for \textsc{xz}.
The proportion of commits that only interact with features through inside dataflow varies less between the projects.
\textsc{gzip} has the highest percentage at 31.3\%, \textsc{bzip2} the lowest at 20\% with \textsc{xz} inbetween the two at 23.9\%. \\
\iffalse
We admit that the high proportions of commits with both inside and outside dataflow are rather unexpected.
They hinder a clear separation of commits with dataflow interactions into less and more interesting commits, e.g. commits whose dataflow interactions are more and less obvious.
\fi
We notice that commits interacting with features through inside dataflow, have a high chance to also interact with \texttt{other} features through outside dataflow.
By definition, all commits interacting with features through inside dataflow also structurally interact with them.
From previous explanations, we also know these commits are almost identical to the entire set of commits with structural interactions.
It follows that commits part of structural CFIs must also have a high, albeit slightly lower, chance to affect other features through outside dataflow.
We compare this probability to the probability of any active commit to interact with features through outside dataflow in table \ref{tab:commit_dfbr_rel_table}.
The strongest contrast occurs for \textsc{xz}, where 41.7\% of commits structurally interacting with features, interact with other features through outside dataflow, making them 4.8 times more likely to do so compared to any active commit of \textsc{xz} at 8.6\%.
The contrast is slightly weaker for \textsc{bzip2} with a 3.1 times higher likelihood and according percentages of 66.7 and 21.6\% respectively. 
\text{gzip} has the weakest contrast at 1.5 and respective probabilites of 59.6 and 38.1\%. 

\begin{figure}[htbp]
  \centering
  \includesvg[height=8.9cm]{gfx/results/RQ2/proportional_commit_dfbr_plot.svg}
  \caption{Proportional Dataflow-Plot for Commits}
  \label{fig:commit_dfbr_plot}
\end{figure}

\begin{table}[t]
\caption{Relating Inside Dataflow to Outside Dataflow}
\label{tab:commit_dfbr_rel_table}
\centering
\begin{tabular}{l r r}
\toprule
\textbf{Projects} & \textbf{Probability for Commits Part of Structural CFIs} & \textbf{Same Probability Given} \\ 
 		  & \textbf{to Affect other Features Through Outside DF}     & \textbf{Any Active Commit} \\
\midrule
  xz    & 0.417 & 0.086 \\
  gzip  & 0.596 & 0.381 \\
  bzip2 & 0.667 & 0.216 \\
\bottomrule
\end{tabular}
\end{table}

\clearpage

\begin{figure}[htbp]
  \centering
  \includesvg[height=19cm]{gfx/results/RQ2/feature_dfbr_plot.svg}
  \caption{Proportional Dataflow-Plot for Features}
  \label{fig:feature_dfbr_plot}
\end{figure}

\clearpage

\subsubsection*{Understanding Features and the Commits Affecting them Through Dataflow}\label{sec:eval_feature_dfbr}

Besides exmaining the ratio of outside and inside commits affecting a feature through dataflow, we also relate the two metrics to the size of a feature.
Furthermore, we want to put our thesis, that the proportion of outside to inside commits of a feature decreases as its size increases, to the test.
Our results are shown in figure \ref{fig:feature_dfbr_plot} in three plots for each of our investigated projects.
In column one of the respective figure, we display the number of outside and inside commits for each feature in a bar plot.
We note that the majority of features in \textsc{xz}, \textsc{gzip} and \textsc{lrzip} are affected by more outside than inside commits through dataflow.
For \textsc{xz} and \textsc{gzip} this is underlined in median-values of 18.5 and 54 for outside commits and median-values of 6.5 and 14 for inside commits among their features.
% mention dichomitry between gzip's four largest features and the rest??
For features of \textsc{xz} and \textsc{gzip} with more outside than inside commits, we also notice very high ratios of outside to inside commits.
They range from 2 to 9 in \textsc{xz} with a mean of 4.4 and from 3 to 32 in \textsc{gzip} with a mean of 10.8.
For features with more inside than outside commits affecting them through dataflow, we determined much lower ratios and according ranges of inside to outside commits.
They range from 1.17 to 1.44 in \textsc{xz} with a mean of 1.3 and from 2.3 to 2.8 in \textsc{gzip} with a mean of 2.5.
At least for these two projects, the number of outside commits is often not only slightly higher than the number of inside commits, but instead exceeds it by many maginutes.
% - due to the high degree of feature-nesting determined for \textsc{gzip} in the evaluation of RQ1, we decided to test  
% same not true for inside commits
The features of \textsc{bzip2} exhibit a different general behavior than the features of the projects discussed above.
Specifically, 6 out of 8 features encompass more or at least the same number of inside than outside affecting them through dataflow.
The range and maximum number of interacting commits is also much lower compared to the other examined projects. \\
In the second column of figure \ref{fig:feature_dfbr_plot}, we compare the number of inside and the number of outside commits of a feature with its size in a regression plot.
As suspected during the formulation of RQ2, we find a strong positive correlation regarding the inside commits of features across all projects.
Especially, the correlation coefficients for \textsc{xz}, \textsc{gzip} and \textsc{lrzip} range close to 1 with a minimum value of 0.935.
\textsc{xz} and \textsc{gzip} encompass p-values of less than $10^{-4}$ supporting a statisitically significant correlation.
The correlations regarding the outside commits affecting features through dataflow are vastly different from project to project.
\textsc{xz} is the only project with a strong positive correlation with a coefficient of 0.824.
A low p-value of 0.003 outside of our rejection interval makes the data seem statistically significant at first.
However, the dots of its regression plot are scattered rather randomly and the number of interacting commits generally does not increase with rising feature-size.
We determined the \textsf{Verbosity}-feature to be the main reason for our calculated strong positive correlation.
This becomes clear when we disregard \textsf{Verbosity} in our analysis, which results in the coefficient dropping close to 0 and the p-value rising to 1.
\textsc{gzip} encompasses a negative correlation coefficient of -0.772 and a p-value of 0.002 justifiying the existence of significant statistical evidence.
The falling linear regression line is mainly formed by the two existing clusters, where one consists of four very large and the other cluster of nine relatively small features.
The former cluster consists of features that each interact with around 30 outside commits through dataflow.
The cluster consisting of features with small sizes encompasses higher values between 50 and 65.
The only feature of \textsc{gzip} that cannot be assigned to a cluster is the \textsf{recursive}-feature, which rather fits into the first cluster according to its number of outside commits and into the second cluster according to its size.
In \textsc{bzip2}, the number of outside commits affecting a feature through dataflow and its size are un-correlated.
A correlation coefficient of 0.545 and a high p-value of 0.633 do not provide significant statistical evidence for the existence of a correlation in \textsc{lrzip}. \\
In the third column of figure \ref{fig:feature_dfbr_plot}, we finally relate the size of a feature to its proportion of outside to inside commits.
At first, we notice that the calculated correlation coefficients are negative across all projects.
The fact that the coefficients of \textsc{xz} and \textsc{bzip2} are close to 0 and the p-values correspondingly high is illustrated by the rather random distribution of dots in their respective regression plots.
Their data should therefore not be regarded as statistically significant.
Compared to the aforementioned projects, \textsc{gzip}'s p-value of 0.035 is very low, while it also has a lower correlation coefficient of -0.588.
Similarly to \textsc{gzips}'s previous plots, we can identify two clusters.
A cluster of dots is again formed by the four largest features, encompassing proportions of outside to inside commits slightly below 0.5.
The other cluster is located at the beginning of the x-axis with a wide spread across the y-axis, indicating its low feature-size and a wide range of proportions from 3 to 32.
The coefficient of \textsc{lrzip} is by far the smallest among all projects at -0.99, but the small number of features results in a p-value of 0.088.
It follows that none of the determined negative correlations are statistically significant, as their p-values fall into our rejection interval of 97.5.





































\subsection*{\textbf{RQ3: Evaluation of Author Interactions}}\label{sec:eval_author_interactions}

- the project \textsc{xz} has mostly been developed by a single author, which is reflected in our results \\
- as can be seen in figure \ref{fig:author_cfi_plot}, all except one feature have exclusively been implemented by the same author \\
- we can conclude that it also is the developer affecting features through outside dataflow, since no feature has unique dataflow authors \\
- it follows that the linear regression relating the size of a feature to the number of its interacting authors shows no significant correlation \\

- \textsc{bzip2} inconclusive data, no correlation to be found \\
- \textsc{lrzip} more authors of features, but no general trend to be found due to lack of features \\

- \textsc{gzip}, on the other hand, provides us with much more comprehensive results \\
- it can immediately be seen that every feature has a large number of interacting authors \\
- the overall number of authors that interact with a feature in any way can be computed by the sum of its structural and its unique dataflow authors \\
- this means that the lowest number of interacting authors is 7 for the \textsf{recursive}-feature and the highest number 14 for the \textsf{force}-feature \\
- on average, a feature has more dataflow than structural authors with respective averages of 9.1 and 5.7 \\
- the average number of unique dataflow authors is 5.9, which means that our dataflow analysis discovers many additional interacting authors in \textsc{gzip} \\
- the number of structurally interacting authors, i.e. authors implementing a feature, range from 2 to 13 between the features of \textsc{gzip} \\
- there is less variance in the number of a feature's outside dataflow authors ranging from 7 to 12 \\
- features with relatively few structural authors, have a comparatively high number of dataflow authors \\
- features with many structural authors, starting from the \textsc{no\_name}-feature, have less outside dataflow authors \\ 
- at the same time, the number of their unique dataflow authors is rather low, implying that most of them also structurally interact with the according features \\
- the fact that the group of features with few structural authors has much more dataflow authors conditions them to have many unique dataflow authors \\
- still, more than 80\% of their structural authors also interact with them through outside dataflow \\
- the same cannot be said for the group of features with many structural authors, where this is the case for less than 45\% of them \\
- overall, there is a 57\% likelihood for the structural author of any feature to also interact with the feature through outside dataflow \\
- similarly to the bar-plot of \textsc{gzip}, we notice two clusters when examining its regression plots in figure \ref{fig:author_cfi_plot} \\
- the first cluster is made up of features with few structural authors, whose respective sizes range between 50 and 500 \\
- the second cluster consists of the four features who all have over 10 structural authors and feature-sizes ranging from 5500 to 6500 \\
- it is unsurprising that we compute a strong positive correlation between the size of a feature and its structurally interacting developers \\
- the respective correlation coefficient is 0.976, while the p-value is smaller than $10^{-4}$ \\
- regarding the dataflow authors of features, we note two similar clusters that consist of the same features of smaller and large sizes respectively \\
- now, the smaller features have slightly more dataflow authors centering around 10 than the much larger features with an average of 8 \\
- this shows itself in a negative correlation coefficient of -0.746 and a p-value of 0.003 falling out of our rejection range \\
- 
































\begin{figure}[htbp]
  \centering
  \includesvg[height=19cm]{gfx/results/RQ3/author-cfi-plot.svg}
  \caption{Author CFI Plot}
  \label{fig:author_cfi_plot}
\end{figure}

\clearpage 

\section{Discussion}\label{sec:discussion}

\subsection*{\textbf{RQ1: Structural CFIs}}\label{sec:eval_struc_cfis}

Generally, we have seen our expectations for possible results of RQ1 mostly confirmed.
Here, we briefly formulate our most important results, which we discuss in more detail in the following sub-sections.
Firstly, we found sufficient evidence to support the notion that the number of commits used to develop a feature is strongly positively correlated with the size of the code implementing its functionality. 
Secondly, we have high confidence that most commits, within our investigated projects, only changed or implemented functionality of one feature.

\subsubsection*{Patterns around Feature Development}

The features within the investigated projects exhibit a wide distribution of structurally interacting commits and sizes.
We consider this as a clear indication that the number of commits as well as the extent of source-code used to implement a feature varies a lot between them.
The range of least to most interacting commits and lowest to highest feature-size is hereby dependent on the specific project. \\
Determining the average nesting degree of features within a project showed us that, especially in the case of \textsc{gzip}, feature-nesting is more common than initially expected.
Most of the computed sizes of \textsc{gzip}'s respective features are made up of instructions that are part of multiple feature-regions besides its own. 
This makes it difficult to clearly interpret the data, as the number of instructions that actually implement a feature can differ greatly from our observed size. 
This phenonemon also bears consequences on they way commits are used in feature development and the CFIs resulting from this. 
If a developer wants to specifically change a feature nested inside other features, the according commit will necessarily produce structural CFIs with several features.  
This also casts some doubt how well the structural interactions of a feature with a high nesting degree accurately represent its development.
A concrete example of this are the four, by far largest, features of \textsc{gzip}.
In our evaluation of RQ1, we have already explained that they share the vast majority of instructions constituting their size, as well as the commits that structurally interact with them.
In these cases, it would be extremely helpful to be able to decide whether the respective instructions and commits are actually \texttt{implementing} commits and instructions of a particular feature.
While solving this problem goes beyond the scope of this work, we will adress the subject and possible solutions again in the \nameref{sec:futurework} section of this thesis. \\
We employed the pearson correlation coefficient to investigate the linear relationship between the size of a feature and the number of commits structurally interacting with it. 
While we found high correlation coefficients of 0.9 and above, the p-values of \textsc{lrzip} and \textsc{bzip2} were not low enough to justify the data to be statistically significant.  
We know that p-values are highly dependent on the number of datapoints, that is, the number of features of a project. 
Logically, projects with fewer features have less datapoints resulting in their p-values being quite high and falling into our rejection interval. 
With 10 and 14 features respectively, \textsc{xz} and \textsc{gzip} have by far the most datapoints and according p-values of less than $10^{-4}$ giving us most significant evidence for a strong positive correlation. 
Due to the above-mentioned problems caused by \textsc{gzip}'s high overall nesting degree, the significance of the found strong positive correlation is somewhat weakened.
On the other hand \textsc{xz} has a relatively low overall nesting degree, but still shows the same strong positive correlation.
Therefore, we are still able to confirm our original thesis of a strong dependency between the size of the implementing code and the number of implementing commits of a feature. \\
% - therefore, future research should prefer projects with at least 10 features so that correlations and other measurments produce trustful statistical data. \\
A possibility to circumvent the problem of too few datapoints could be to combine features of all projects into one big dataset.  
Here, we are faced with the issue that the way commits are used among projects might differ drastically. 
In our case, the number of instructions per structurally interacting commit of a feature varies greatly from project to project.  
The respective values are 17 for \textsc{xz}, 48 for \textsc{gzip}, 87 for \textsc{bzip2} and 13 for \textsc{lrzip}.  
This means that features of a similar size have, on average, vastly different numbers of structurally interacting commits across different projects. 
Upon these considerations, we are of the opinion that it makes more sense to test correlations within projects as we have done in this work. 

\subsubsection*{Usage of Commits in Feature Development}

In section \ref{sec:commit_concerns}, we explained that, due to feature-nesting, the number of features a commit structurally interacts with can be a faulty estimate of how many features a commit usually changes.
To achieve a more accurate measure, we introduced the concept of feature-related concerns of a commit (\ref{def:commit_concerns}).
There, we do not look at the structural CFIs of a commit separately, but rather focus on the entirety of them and the instructions they stem from.
As long as the CFIs occur in the same feature-related location, i.e. in instructions belonging to regions of the same set of features, we assume that only one specific feature was implemented by the commit.
A concrete example of why the feature-related concerns can be a more accurate estimate for the number of changed features is shown in listing \ref{lst:commit_concerns}.
% of course not 100\% accurate, for example when two features are implemented within the exact same code-space => we suspect this does not happen often 
Excluding \textsc{bzip2}, roughly $70\%$ of commits only have a single feature-related concern in the remaining projects.
Despite this, \textsc{gzip}'s average is quite high at 2.4, in comparison to \textsc{xz} and \textsc{lrzip} with 1.48 and 1.3 respectively.
It decreases to 1.55 after filtering large commits, such as commit \textsf{33ae4134cc} with an exceptionally high number of 47 feature-related concerns.
Its purpose was to import the original \textsf{gzip.c}-file into the repository, which justifies the exclusion of the commit.
Besides that, \textsc{gzip} only encompasses 14 features making it impossible for a commit to change 15 or more features.
The number of feature-related concerns being higher than the overall number of features also occurs for commits of \textsc{bzip2} and \textsc{lrzip}.
It follows that the concerns of commits can sometimes overestimate the number of changed features.
Naturally, this is most likely for commits structurally interacting with many features that also have high nesting degrees.
The code affected by these commits can include more combinations of different sets of feature regions than features present in the project.
For the respective commits, the number of feature-related concerns should rather be reduced to the total number of features they interact with. \\
To summarize our results, most commits of \textsc{xz}, \textsc{gzip} and \textsc{lrzip} have only one feature-related concern with an average of less than 1.6 after filtering large commits. 
Given that the feature-related concerns accurately reflect the number of changed features for most commits, we can confirm our initial thesis. 
Thus, the majority of commits that structurally interact with features are only used to change functionality of one feature. \\
In contrast to three projects discussed above, \textsc{bzip2} has shown to be a project whose results need to be treated more carefully.
Only 9 commits structurally interact with its features, encompassing much less datapoints compared to the other investigated projects.
6 out of 9 commits were used to import the initial project to git and iteratively update the code to newer versions.
These commits are not exemplary of the common development process of a project and its features in a git repository.
The actual development of the tool in the git repository began after \textsc{bzip2} was finally updated to version 1.0.6.
The remaining 3 commits introduce minor changes and small bug fixes to the respective features they interact with.
This means that \textsc{bzip2}'s features were largely already implemented when the actual development within the repository started.
Thus, the average number of concerns of a commit as well as their overall distribution are not good representatives of other projects developed in git. 

\section{Threats to Validity}\label{sec:threats}

In this section, discuss the threats to internal and external validity.

